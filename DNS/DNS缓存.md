**TLD 一定知道权威 DNS 服务器的 IP 地址吗？** 
有时 TLD 只是知道中间的某个 DNS 服务器，再由这个中间 DNS 服务器去找到权威 DNS 服务器。这种时候，整个查询过程就需要更多的 DNS 报文。  

# DNS 缓存
为了让我们更快的拿到想要的 IP，DNS 广泛使用了缓存技术。DNS 缓存的原理非常简单，在一个 DNS 查询的过程中，当某一台 DNS 服务器接收到一个 DNS 应答（例如，包含某主机名到 IP 地址的映射）时，它就能够将映射缓存到本地，下次查询就可以直接用缓存里的内容。当然，缓存并不是永久的，每一条映射记录都有一个对应的生存时间，一旦过了生存时间，这条记录就应该从缓存移出。
事实上，有了缓存，大多数 DNS 查询都绕过了根 DNS 服务器，需要向根 DNS 服务器发起查询的请求很少。


作者：我是陆小北
链接：https://juejin.cn/post/6990344840181940261
来源：稀土掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。


## DNS 缓存  
假如 DNS 服务器每次都需要迭代或递归查询上一级的 DNS 服务器，那么 DNS 可能就不堪重负，考虑到域名的 DNS 信息不会频繁的修改，所以每一级中的 DNS 服务器都会缓存结果（包括浏览器这样的客户端也会缓存 DNS 结果）。

缓存带来的弊端可能就是 DNS 信息可能不是最新的，比如某个域名管理员修改了某个域名的 A 记录，由于每一级的 DNS 服务器都有缓存，所以最后客户端拿到的结果不是最新的，为了获取到最新的结果，可以直接向权威域名服务器进行信息查询。

比如 blog.rss.baidu.com 的域名是由 dns9.hichina.com.（106.11.211.55）管理的，可以直接通过 dig @106.11.211.55 -t a baidu.com 或者 dig @dns9.hichina.com -t a baidu.com 获取最新 A 记录。

另外你也可以不查询本地 DNS 服务器获取信息，比如可以使用 8.8.8.8 Google Public DNS 进行查询，dig @8.8.8.8 -t a baidu.com 。

作者：虞大胆的叽叽喳喳
链接：https://www.jianshu.com/p/71f61652ec23
来源：简书
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。